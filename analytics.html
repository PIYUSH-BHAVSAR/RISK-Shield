<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analytics - RiskShield</title>
  <link rel="stylesheet" href="styles/common.css">
  <link rel="stylesheet" href="styles/components.css">
  <link rel="stylesheet" href="styles/responsive.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="container flex justify-between items-center">
      <a href="/" class="nav-logo">
        <div class="nav-logo-icon">Ψ</div>
        <span class="nav-logo-text">RiskShield</span>
      </a>
      <ul class="nav-links">
        <li><a href="/" class="nav-link">Home</a></li>
        <li><a href="/dashboard.html" class="nav-link">Dashboard</a></li>
        <li><a href="/analytics.html" class="nav-link active">Analytics</a></li>
        <li><a href="/model-performance.html" class="nav-link">Model</a></li>
        <li><a href="/single-prediction.html" class="nav-link">Predict</a></li>
         <li><a href="/bulk-prediction.html" class="nav-link">Bulk Predict</a></li>
      </ul>
      <div class="nav-actions">
        <button class="theme-toggle" title="Toggle dark mode">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
        </button>
        <button class="mobile-menu-toggle">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main>
    <div class="container py-8">
      <div style="margin-bottom: 2rem;">
        <h1>Analytics</h1>
        <p class="text-muted">Deep insights into fraud detection patterns and model performance</p>
      </div>

      <!-- Filters -->
      <div class="card" style="margin-bottom: 2rem;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
          <div class="form-group" style="margin-bottom: 0;">
            <label>Time Range</label>
            <select id="time-range">
              <option value="24h">Last 24 Hours</option>
              <option value="7d" selected>Last 7 Days</option>
              <option value="30d">Last 30 Days</option>
              <option value="90d">Last 90 Days</option>
            </select>
          </div>
          <div style="display: flex; align-items: flex-end;">
            <button class="btn btn-outline w-full">Apply Filters</button>
          </div>
        </div>
      </div>

      <!-- Charts Grid -->
      <div style="display: grid; grid-template-columns: 1fr; gap: 2rem; margin-bottom: 2rem;">
        <!-- Chart 1: Fraud Trend -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Transaction Classification Trend</h3>
            <p class="card-description">Daily breakdown of legitimate, risky, and fraudulent transactions</p>
          </div>
          <div style="position: relative; height: 300px;">
            <canvas id="chart-trend"></canvas>
          </div>
        </div>

        <!-- Chart 2: Volume and Risk Distribution -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
          <!-- Volume Chart -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Transaction Volume by Hour</h3>
              <p class="card-description">Hourly distribution</p>
            </div>
            <div style="position: relative; height: 300px;">
              <canvas id="chart-volume"></canvas>
            </div>
          </div>

          <!-- Channel Distribution -->
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Transactions by Channel</h3>
              <p class="card-description">Distribution across channels</p>
            </div>
            <div style="position: relative; height: 300px;">
              <canvas id="chart-channel"></canvas>
            </div>
          </div>
        </div>

        <!-- Chart 3: Risk Score Distribution -->
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">Risk Score Distribution</h3>
            <p class="card-description">Customer risk scoring breakdown</p>
          </div>
          <div style="position: relative; height: 300px;">
            <canvas id="chart-risk"></canvas>
          </div>
        </div>

        <!-- Chart 4: Model Accuracy -->
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
          <div class="card">
            <div class="card-header">
              <h3 class="card-title">Model Prediction Accuracy</h3>
              <p class="card-description">Classification metrics</p>
            </div>
            <div style="position: relative; height: 250px;">
              <canvas id="chart-accuracy"></canvas>
            </div>
          </div>
<!-- KPIs (Updated - Now dynamic) -->
<div style="display: flex; flex-direction: column; gap: 1rem;">

  <div class="card" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(59, 130, 246, 0.05));">
    <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">Overall Accuracy</p>
    <p id="metric-accuracy" style="font-size: 2rem; font-weight: 700; color: var(--primary);">--%</p>
  </div>

  <div class="card" style="background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(139, 92, 246, 0.05));">
    <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">Precision</p>
    <p id="metric-precision" style="font-size: 2rem; font-weight: 700; color: var(--secondary);">--%</p>
  </div>

  <div class="card" style="background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(34, 197, 94, 0.05));">
    <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">Recall</p>
    <p id="metric-recall" style="font-size: 2rem; font-weight: 700; color: #22c55e;">--%</p>
  </div>

  <div class="card" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.05));">
    <p style="font-size: 0.875rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">F1 Score</p>
    <p id="metric-f1" style="font-size: 2rem; font-weight: 700; color: var(--accent);">--%</p>
  </div>

</div>

<!-- KPI Cards (Replace this Block Only) -->
<div class="grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
  <div class="card" style="border-left: 4px solid var(--primary);">
    <p class="text-muted">Total Transactions</p>
    <p id="kpi-total-transactions" style="font-size: 1.5rem; font-weight: 700;">--</p>
  </div>
  <div class="card" style="border-left: 4px solid var(--destructive);">
    <p class="text-muted">Fraud Detected</p>
    <p id="kpi-fraud-detected" style="font-size: 1.5rem; font-weight: 700;">--</p>
  </div>
  <div class="card" style="border-left: 4px solid var(--secondary);">
    <p class="text-muted">Accuracy Rate</p>
    <p id="kpi-accuracy-rate" style="font-size: 1.5rem; font-weight: 700;">--</p>
  </div>
  <div class="card" style="border-left: 4px solid var(--accent);">
    <p class="text-muted">Amount Protected</p>
    <p id="kpi-amount-protected" style="font-size: 1.5rem; font-weight: 700;">--</p>
  </div>
</div>

  <!-- Footer -->
  <footer>
    <div class="container footer-bottom">
      <p>© 2024 RiskShield. All rights reserved.</p>
    </div>
  </footer>

  <script src="js/mock-data.js"></script>
  <script src="js/common.js"></script>
  <script src="js/analytics.js"></script>
</body>
</html>
